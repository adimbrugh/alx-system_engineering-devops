#!/usr/bin/env python3
import os
import sys

def custom_to_decimal(value, base_chars):
    base = len(base_chars)
    char_to_val = {char: idx for idx, char in enumerate(base_chars)}
    num = 0
    for char in value:
        if char not in char_to_val:
            print(f"Error: Invalid character '{char}' in input for base '{base_chars}'", file=sys.stderr)
            sys.exit(1)
        num = num * base + char_to_val[char]
    return num

def decimal_to_custom(num, base_chars):
    base = len(base_chars)
    if num == 0:
        return base_chars[0]
    result = ''
    while num > 0:
        result = base_chars[num % base] + result
        num //= base
    return result

# Get environment variables
water_str = os.getenv("WATER", "")
stir_str = os.getenv("STIR", "")

# Define base characters
water_base = "waetr"
stir_base = "tir."
result_base = "bestchol"

# Convert both to decimal
dec_water = custom_to_decimal(water_str, water_base)
dec_stir = custom_to_decimal(stir_str, stir_base)

# Add the values
total = dec_water + dec_stir

# Convert result to custom base
result = decimal_to_custom(total, result_base)

# Output
print(result)
